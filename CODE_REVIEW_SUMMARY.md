# ã‚¢ãƒ‹ãƒ¡ãƒ­ã‚° ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ - å•é¡Œç‚¹ã¾ã¨ã‚

## ğŸ”´ å„ªå…ˆåº¦ï¼šé«˜ï¼ˆç·Šæ€¥ã«å¯¾å¿œã™ã¹ãï¼‰

### 1. Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ã„åˆ†ã‘ãŒä¸é©åˆ‡

**å•é¡Œç‚¹ï¼š**
- `@supabase/ssr`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãªã„
- Server Componentsã‚„API routesã§`@supabase/supabase-js`ã®`createClient`ã‚’ç›´æ¥ä½¿ç”¨ã—ã¦ã„ã‚‹
- ã‚µãƒ¼ãƒãƒ¼å´ã§ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãŒé©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ãªã„
- ã‚¯ãƒƒã‚­ãƒ¼ãƒ™ãƒ¼ã‚¹ã®èªè¨¼ãŒæ©Ÿèƒ½ã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/lib/supabase.ts` - ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã¿å®šç¾©
- `app/profile/[username]/page.tsx` (39è¡Œç›®) - Server Componentã§ä¸é©åˆ‡ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ç”¨
- `app/share/[username]/page.tsx` (39è¡Œç›®) - Server Componentã§ä¸é©åˆ‡ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ç”¨
- `app/api/og/route.tsx` (71è¡Œç›®) - Edge Runtimeã§ä¸é©åˆ‡ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ç”¨
- `app/api/delete-account/route.ts` (25è¡Œç›®) - API Routeã§ä¸é©åˆ‡ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ç”¨

**æ¨å¥¨å¯¾å¿œï¼š**
```bash
npm install @supabase/ssr
```

1. **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**ï¼ˆ`app/lib/supabase-client.ts`ï¼‰ã‚’ä½œæˆ
2. **ã‚µãƒ¼ãƒãƒ¼ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**ï¼ˆ`app/lib/supabase-server.ts`ï¼‰ã‚’ä½œæˆ
3. **API Routeç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**ï¼ˆ`app/lib/supabase-route-handler.ts`ï¼‰ã‚’ä½œæˆ

**å‚è€ƒå®Ÿè£…ï¼š**
```typescript
// app/lib/supabase-server.ts
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'

export async function createServerSupabaseClient() {
  const cookieStore = await cookies()
  
  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        get(name: string) {
          return cookieStore.get(name)?.value
        },
        set(name: string, value: string, options: any) {
          cookieStore.set({ name, value, ...options })
        },
        remove(name: string, options: any) {
          cookieStore.set({ name, value: '', ...options })
        },
      },
    }
  )
}
```

---

### 2. ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸å…¨ä½“ãŒClient Component

**å•é¡Œç‚¹ï¼š**
- `app/page.tsx`ãŒå…¨ä½“ã§`'use client'`ã«ãªã£ã¦ã„ã‚‹ï¼ˆ1è¡Œç›®ï¼‰
- åˆæœŸãƒ‡ãƒ¼ã‚¿å–å¾—ãªã©ã¯Server Componentã§è¡Œã†ã¹ã
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨SEOã«å½±éŸ¿
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãããªã‚‹
- Next.js App Routerã®åˆ©ç‚¹ã‚’æ´»ç”¨ã§ãã¦ã„ãªã„

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/page.tsx` - å…¨ä½“ãŒClient Component

**æ¨å¥¨å¯¾å¿œï¼š**
- åˆæœŸãƒ‡ãƒ¼ã‚¿å–å¾—éƒ¨åˆ†ã‚’Server Componentã«åˆ†å‰²
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªéƒ¨åˆ†ã®ã¿Client ComponentåŒ–
- Layoutã‚„åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°éƒ¨åˆ†ã¯Server Componentã¨ã—ã¦å®Ÿè£…

**ä¾‹ï¼š**
```typescript
// app/page.tsx (Server Component)
import { createServerSupabaseClient } from './lib/supabase-server'
import HomeClient from './HomeClient'

export default async function HomePage() {
  const supabase = await createServerSupabaseClient()
  // åˆæœŸãƒ‡ãƒ¼ã‚¿å–å¾—ãªã©...
  
  return <HomeClient initialData={...} />
}
```

---

### 3. Edge Runtimeã§ã®Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ç”¨

**å•é¡Œç‚¹ï¼š**
- `app/api/og/route.tsx`ã§`export const runtime = 'edge'`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã€Edge Runtimeã§ã¯`@supabase/supabase-js`ã®ä¸€éƒ¨æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
- ã‚¯ãƒƒã‚­ãƒ¼å‡¦ç†ãŒEdge Runtimeã§æ­£ã—ãå‹•ä½œã—ãªã„å¯èƒ½æ€§
- `createClient`ã‚’ç›´æ¥ä½¿ç”¨ã—ã¦ã„ã‚‹ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãŒã§ããªã„ï¼‰

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/api/og/route.tsx` (5è¡Œç›®ã€71è¡Œç›®)

**æ¨å¥¨å¯¾å¿œï¼š**
- Edge Runtimeã‚’å‰Šé™¤ã™ã‚‹ã‹ã€Node.js runtimeã«å¤‰æ›´
- ã¾ãŸã¯ã€Edge Runtimeç”¨ã®é©åˆ‡ãªå®Ÿè£…ã«å¤‰æ›´ï¼ˆ`@supabase/ssr`ã®Edgeå¯¾å¿œç‰ˆã‚’ä½¿ç”¨ï¼‰

---

### 4. API Routeã§ã®èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³å‡¦ç†ãŒæ‰‹å‹•

**å•é¡Œç‚¹ï¼š**
- `app/api/delete-account/route.ts`ã§èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ‰‹å‹•ã§å‡¦ç†ã—ã¦ã„ã‚‹ï¼ˆ33-36è¡Œç›®ï¼‰
- Supabaseã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ç”¨ã™ã¹ã
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒã‚ã‚‹å¯èƒ½æ€§

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/api/delete-account/route.ts` (32-40è¡Œç›®)

**æ¨å¥¨å¯¾å¿œï¼š**
```typescript
import { createRouteHandlerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'

export async function POST(request: NextRequest) {
  const cookieStore = await cookies()
  const supabase = createRouteHandlerClient({ cookies: () => cookieStore })
  
  const { data: { user }, error } = await supabase.auth.getUser()
  if (error || !user) {
    return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })
  }
  
  // ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ãƒ¼ãƒ«ã‚­ãƒ¼ã¯å‰Šé™¤æ“ä½œç”¨ã®ã¿ä½¿ç”¨
  // ...
}
```

---

## ğŸŸ¡ å„ªå…ˆåº¦ï¼šä¸­ï¼ˆæ”¹å–„æ¨å¥¨ï¼‰

### 5. å‹å®‰å…¨æ€§ã®å•é¡Œï¼ˆanyå‹ã®å¤šç”¨ï¼‰

**å•é¡Œç‚¹ï¼š**
- `any`å‹ãŒ42ç®‡æ‰€ä»¥ä¸Šã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
- å‹å®‰å…¨æ€§ãŒæãªã‚ã‚Œã¦ã„ã‚‹
- TypeScriptã®æ©æµã‚’ååˆ†ã«å—ã‘ã‚‰ã‚Œã¦ã„ãªã„

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/page.tsx` (218, 222, 234è¡Œç›®): `any[]`å‹ã®å¤‰æ•°
- `app/components/tabs/HomeTab.tsx`: è¤‡æ•°ç®‡æ‰€ã§`any`å‹ã‚’ä½¿ç”¨ï¼ˆ179, 184, 419, 469, 548, 571, 612, 629, 1084, 1149, 1211, 1335, 1342-1344, 1376è¡Œç›®ï¼‰
- `app/components/tabs/WatchlistTab.tsx`: `any`å‹ï¼ˆ83, 151, 193, 216, 257, 272è¡Œç›®ï¼‰
- `app/components/modals/AuthModal.tsx`: `error: any` (164, 188è¡Œç›®)
- `app/components/modals/SettingsModal.tsx`: `user: any` (34è¡Œç›®)
- `app/utils/helpers.ts`: `row: any`, `animes: any[]` (28, 177è¡Œç›®)
- `app/components/tabs/MyPageTab.tsx`: `supabaseClient: any` (34è¡Œç›®)
- `app/components/tabs/MusicTab.tsx`: `user: any`, `supabase: any` (27-28è¡Œç›®)
- `app/components/tabs/mypage/CollectionSection.tsx`: `supabaseClient: any` (14è¡Œç›®)
- `app/api/delete-account/route.ts`: `error: any` (109è¡Œç›®)
- ãã®ä»–å¤šæ•°

**æ¨å¥¨å¯¾å¿œï¼š**
- é©åˆ‡ãªå‹å®šç¾©ã‚’ä½œæˆï¼ˆAniList APIã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹ãªã©ï¼‰
- `any`å‹ã‚’å…·ä½“çš„ãªå‹ã«ç½®ãæ›ãˆ
- å‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ä½œæˆï¼ˆä¾‹ï¼š`AniListMedia`, `SupabaseRow`ãªã©ï¼‰

---

### 6. ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¨ä¸€æ™‚çš„ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤

**å•é¡Œç‚¹ï¼š**
- `app/page.tsx`ã§`useSocial`ãƒ•ãƒƒã‚¯ãŒã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚Œã€ä¸€æ™‚çš„ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ï¼ˆ29è¡Œç›®ã€186-237è¡Œç›®ï¼‰
- ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã¨ä¿å®ˆæ€§ã«å½±éŸ¿
- æœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ãŒæ®‹ã£ã¦ã„ã‚‹

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/page.tsx` (29è¡Œç›®ã€186-237è¡Œç›®)

**æ¨å¥¨å¯¾å¿œï¼š**
- ä¸è¦ãªã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤
- ä¸€æ™‚çš„ãªå®Ÿè£…ã¯æ­£å¼ãªå®Ÿè£…ã«ç½®ãæ›ãˆ
- æ©Ÿèƒ½ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€è¨­å®šãƒ•ãƒ©ã‚°ã§åˆ¶å¾¡ã™ã‚‹

**ä¾‹ï¼š**
```typescript
// æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ã§åˆ¶å¾¡
const ENABLE_SOCIAL_FEATURES = false

const socialFeatures = ENABLE_SOCIAL_FEATURES 
  ? useSocial(user)
  : createDefaultSocialFeatures()
```

---

### 7. Server Componentsã§ã®ç’°å¢ƒå¤‰æ•°ã‚¢ã‚¯ã‚»ã‚¹

**å•é¡Œç‚¹ï¼š**
- Server Componentsã§ç’°å¢ƒå¤‰æ•°ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ãŒã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒä¸ååˆ†
- `process.env.NEXT_PUBLIC_SUPABASE_URL!`ã®ã‚ˆã†ã«énullã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
- ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒãªã„

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/profile/[username]/page.tsx` (5-6è¡Œç›®)
- `app/share/[username]/page.tsx` (5-6è¡Œç›®)
- `app/api/og/route.tsx` (7-8è¡Œç›®)
- `app/api/delete-account/route.ts` (13-14è¡Œç›®)

**æ¨å¥¨å¯¾å¿œï¼š**
```typescript
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY

if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Missing Supabase environment variables')
}
```

---

### 8. ã‚°ãƒ­ãƒ¼ãƒãƒ«Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä½¿ç”¨

**å•é¡Œç‚¹ï¼š**
- `app/lib/supabase.ts`ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªSupabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ã¯å•é¡Œãªã„ãŒã€ã‚µãƒ¼ãƒãƒ¼å´ã§ã¯é©åˆ‡ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãŒã§ããªã„
- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã§å…±æœ‰ã•ã‚Œã‚‹ã“ã¨ã§ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®å•é¡ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/lib/supabase.ts` (16è¡Œç›®)

**æ¨å¥¨å¯¾å¿œï¼š**
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ã¨ã‚µãƒ¼ãƒãƒ¼ç”¨ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆé–¢æ•°ã‚’åˆ†é›¢
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å‰Šé™¤ã—ã€å¿…è¦ã«å¿œã˜ã¦ä½œæˆã™ã‚‹é–¢æ•°ã«å¤‰æ›´

---

### 9. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¸çµ±ä¸€

**å•é¡Œç‚¹ï¼š**
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒçµ±ä¸€ã•ã‚Œã¦ã„ãªã„
- ä¸€éƒ¨ã®é–¢æ•°ã§ã‚¨ãƒ©ãƒ¼ã‚’`console.error`ã®ã¿ã§å‡¦ç†ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã—ã¦ã„ãªã„
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ—¥æœ¬èªã¨è‹±èªãŒæ··åœ¨

**å½±éŸ¿ç®‡æ‰€ï¼š**
- è¤‡æ•°ç®‡æ‰€

**æ¨å¥¨å¯¾å¿œï¼š**
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çµ±ä¸€
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é©åˆ‡ã«è¡¨ç¤º
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚®ãƒ³ã‚°ã®çµ±ä¸€ï¼ˆä¾‹ï¼šSentryãªã©ã®ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã®å°å…¥ï¼‰

---

### 10. useCallback/useEffectã®ä¾å­˜é…åˆ—ã®ç¢ºèªãŒå¿…è¦

**å•é¡Œç‚¹ï¼š**
- `app/hooks/useAnimeData.ts`ãªã©ã§ã€ä¾å­˜é…åˆ—ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªãŒå¿…è¦
- ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚„ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒªã‚¹ã‚¯

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/hooks/useAnimeData.ts` (108è¡Œç›®) - `loadFromSupabase`ã¨`loadFromLocalStorage`ãŒä¾å­˜é…åˆ—ã«å«ã¾ã‚Œã¦ã„ã‚‹
- ãã®ä»–ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯

**æ¨å¥¨å¯¾å¿œï¼š**
- Reactã®`exhaustive-deps`ãƒ«ãƒ¼ãƒ«ã‚’æœ‰åŠ¹åŒ–
- ä¾å­˜é…åˆ—ã‚’é©åˆ‡ã«è¨­å®š
- ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é˜²ã

---

## ğŸŸ¢ å„ªå…ˆåº¦ï¼šä½ï¼ˆç´°ã‹ã„æ”¹å–„ï¼‰

### 11. Tailwind CSSã‚¯ãƒ©ã‚¹åã®è­¦å‘Š

**å•é¡Œç‚¹ï¼š**
- LinterãŒTailwind CSSã‚¯ãƒ©ã‚¹åã®è­¦å‘Šã‚’å‡ºã—ã¦ã„ã‚‹
- `aspect-[3/4]` â†’ `aspect-3/4`ï¼ˆãŸã ã—ã€Tailwind CSS 4ã®ä»•æ§˜ã‚’ç¢ºèªãŒå¿…è¦ï¼‰
- `bg-gradient-to-br` â†’ `bg-linear-to-br`ï¼ˆã“ã¡ã‚‰ã‚‚ä»•æ§˜ç¢ºèªãŒå¿…è¦ï¼‰

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/components/tabs/WatchlistTab.tsx` (27è¡Œç›®ã€281è¡Œç›®)

**æ¨å¥¨å¯¾å¿œï¼š**
- Tailwind CSS 4ã®ä»•æ§˜ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ä¿®æ­£
- ã¾ãŸã¯ã€è­¦å‘Šã‚’ç„¡è¦–ã™ã‚‹è¨­å®šã‚’è¿½åŠ 

---

### 12. å‹å®šç¾©ã®é‡è¤‡

**å•é¡Œç‚¹ï¼š**
- å‹å®šç¾©ãŒè¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«æ•£åœ¨ã—ã¦ã„ã‚‹å¯èƒ½æ€§
- `UserProfile`å‹ãŒ`app/lib/supabase.ts`ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒã€ä»–ã®å ´æ‰€ã§ã‚‚å®šç¾©ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§
- `Anime`å‹ãŒ`app/types/index.ts`ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒã€å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å†å®šç¾©ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§

**æ¨å¥¨å¯¾å¿œï¼š**
- å‹å®šç¾©ã‚’ä¸€å…ƒç®¡ç†ï¼ˆ`app/types/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
- å…±é€šã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
- é‡è¤‡ã‚’å‰Šé™¤

---

### 13. æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚„å¤‰æ•°

**å•é¡Œç‚¹ï¼š**
- æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚„å¤‰æ•°ãŒå­˜åœ¨ã™ã‚‹å¯èƒ½æ€§

**æ¨å¥¨å¯¾å¿œï¼š**
- ESLintã®æœªä½¿ç”¨å¤‰æ•°ãƒã‚§ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–
- æœªä½¿ç”¨ã®ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤

---

### 14. next.config.tsã§ã®@ts-ignoreã®ä½¿ç”¨

**å•é¡Œç‚¹ï¼š**
- `next.config.ts`ã§`@ts-ignore`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ï¼ˆ3è¡Œç›®ï¼‰
- `next-pwa`ã«å‹å®šç¾©ãŒãªã„ãŸã‚

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `next.config.ts` (3è¡Œç›®)

**æ¨å¥¨å¯¾å¿œï¼š**
- `next-pwa`ã®å‹å®šç¾©ã‚’ä½œæˆã™ã‚‹ã‹ã€ä»£æ›¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¤œè¨
- ã¾ãŸã¯ã€`@ts-expect-error`ã‚’ä½¿ç”¨ï¼ˆã‚ˆã‚Šæ˜ç¤ºçš„ï¼‰

---

### 15. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–ä½™åœ°

**å•é¡Œç‚¹ï¼š**
- å¤§ããªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¤šæ•°ã®çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¦ã„ã‚‹
- ãƒ¡ãƒ¢åŒ–ã®æ´»ç”¨ãŒä¸ååˆ†ãªå¯èƒ½æ€§

**å½±éŸ¿ç®‡æ‰€ï¼š**
- `app/page.tsx` - éå¸¸ã«å¤§ããªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ666è¡Œï¼‰
- `app/components/tabs/HomeTab.tsx` - å¤§ããªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**æ¨å¥¨å¯¾å¿œï¼š**
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†å‰²
- `React.memo`ã®æ´»ç”¨
- `useMemo`ã¨`useCallback`ã®é©åˆ‡ãªä½¿ç”¨

---

## ğŸ“‹ ã¾ã¨ã‚ã¨æ¨å¥¨å¯¾å¿œé †åº

### ç·Šæ€¥ã«å¯¾å¿œã™ã¹ãé …ç›®ï¼ˆå„ªå…ˆåº¦ï¼šé«˜ï¼‰

1. **Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®é©åˆ‡ãªä½¿ã„åˆ†ã‘ï¼ˆ@supabase/ssrã®å°å…¥ï¼‰**
   - æœ€ã‚‚é‡è¦ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ç›´çµ
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š4-6æ™‚é–“

2. **ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã®Server ComponentåŒ–**
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨SEOã«å½±éŸ¿
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š6-8æ™‚é–“

3. **Edge Runtimeã§ã®Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ç”¨ã®ä¿®æ­£**
   - API Routeã®å‹•ä½œã«å½±éŸ¿
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š1-2æ™‚é–“

4. **API Routeã§ã®èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³å‡¦ç†ã®ä¿®æ­£**
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«å½±éŸ¿
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š1-2æ™‚é–“

### æ”¹å–„æ¨å¥¨é …ç›®ï¼ˆå„ªå…ˆåº¦ï¼šä¸­ï¼‰

5. **å‹å®‰å…¨æ€§ã®å‘ä¸Š**
   - ã‚³ãƒ¼ãƒ‰ã®å“è³ªã¨ä¿å®ˆæ€§ã«å½±éŸ¿
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š8-12æ™‚é–“

6. **ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®æ•´ç†**
   - å¯èª­æ€§ã¨ä¿å®ˆæ€§ã«å½±éŸ¿
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š1-2æ™‚é–“

7. **ç’°å¢ƒå¤‰æ•°ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - å …ç‰¢æ€§ã«å½±éŸ¿
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š1-2æ™‚é–“

8. **ã‚°ãƒ­ãƒ¼ãƒãƒ«Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆ†é›¢**
   - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ”¹å–„
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š2-3æ™‚é–“

9. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€**
   - ã‚³ãƒ¼ãƒ‰å“è³ªã«å½±éŸ¿
   - æ¨å®šä½œæ¥­æ™‚é–“ï¼š4-6æ™‚é–“

10. **useCallback/useEffectã®ä¾å­˜é…åˆ—ã®ç¢ºèª**
    - ãƒã‚°é˜²æ­¢ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿
    - æ¨å®šä½œæ¥­æ™‚é–“ï¼š2-4æ™‚é–“

### ç´°ã‹ã„æ”¹å–„é …ç›®ï¼ˆå„ªå…ˆåº¦ï¼šä½ï¼‰

11. **Tailwind CSSã‚¯ãƒ©ã‚¹åã®ä¿®æ­£** - æ¨å®šä½œæ¥­æ™‚é–“ï¼š30åˆ†
12. **å‹å®šç¾©ã®æ•´ç†** - æ¨å®šä½œæ¥­æ™‚é–“ï¼š2-4æ™‚é–“
13. **æœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤** - æ¨å®šä½œæ¥­æ™‚é–“ï¼š1-2æ™‚é–“
14. **@ts-ignoreã®å¯¾å¿œ** - æ¨å®šä½œæ¥­æ™‚é–“ï¼š30åˆ†
15. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–** - æ¨å®šä½œæ¥­æ™‚é–“ï¼š4-8æ™‚é–“

---

## ğŸ”§ æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—

1. **@supabase/ssrã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   npm install @supabase/ssr
   ```

2. **Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆ†é›¢**
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ã€ã‚µãƒ¼ãƒãƒ¼ç”¨ã€API Routeç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆé–¢æ•°ã‚’ä½œæˆ

3. **Server Componentsã‚’é †æ¬¡ä¿®æ­£**
   - `app/profile/[username]/page.tsx`ã‹ã‚‰é–‹å§‹
   - `app/share/[username]/page.tsx`ã‚’ä¿®æ­£
   - `app/api/og/route.tsx`ã‚’ä¿®æ­£ï¼ˆEdge Runtimeã‚’å‰Šé™¤ã¾ãŸã¯Node.js runtimeã«å¤‰æ›´ï¼‰
   - `app/api/delete-account/route.ts`ã‚’ä¿®æ­£

4. **ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã®åˆ†å‰²**
   - Server Componentéƒ¨åˆ†ã¨Client Componentéƒ¨åˆ†ã‚’åˆ†é›¢

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Supabase SSR Documentation](https://supabase.com/docs/guides/auth/server-side/nextjs)
- [Next.js App Router Documentation](https://nextjs.org/docs/app)
- [React Server Components](https://react.dev/reference/rsc/server-components)


